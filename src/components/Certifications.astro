---
import { getCollection } from "astro:content";

const certifications = (await getCollection("certifications")).sort((a, b) => a.data.order - b.data.order);
---

<section id="certifications" class="py-24">
  <div class="max-w-7xl mx-auto px-6">
    <div class="animate-on-scroll mb-16">
      <h3 class="text-2xl font-bold mb-6 flex items-center gap-3 text-stone-800">Certifications</h3>
      <div class="grid md:grid-cols-2 gap-6">
        {
          certifications.map((cert, i) => (
            <div class="animate-on-scroll group card flex flex-col h-full" style={`transition-delay: ${i * 100}ms`}>
              <div class="flex items-start gap-4 mb-4">
                <div class="flex-1">
                  <h3 class="font-bold text-stone-800 group-hover:text-stone-600 transition-colors">
                    {cert.data.title}
                  </h3>
                  <p class="text-sm text-stone-500">{cert.data.issuer}</p>
                  <time class="text-xs text-stone-400 font-mono mt-1 bg-stone-50 inline-block px-2 py-0.5 rounded-md">
                    {cert.data.issueDate}
                    {cert.data.expiryDate && ` â€” ${cert.data.expiryDate}`}
                  </time>
                </div>
              </div>

              {cert.data.description && (
                <p class="text-stone-500 text-sm leading-relaxed mb-5 flex-grow">{cert.data.description}</p>
              )}

              {cert.data.link && (
                <div class="flex items-center gap-4 pt-4 border-t border-stone-100 mt-auto">
                  <a
                    href={cert.data.link}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex items-center gap-2 text-stone-400 hover:text-stone-800 transition-colors"
                    aria-label={`View ${cert.data.title} certification`}>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-external-link">
                      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                      <polyline points="15 3 21 3 21 9" />
                      <line x1="10" y1="14" x2="21" y2="3" />
                    </svg>
                    <span class="text-sm font-medium">View Certification</span>
                  </a>
                </div>
              )}
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
