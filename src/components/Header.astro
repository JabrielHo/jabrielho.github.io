---
const navLinks = [
  { label: "Experience", href: "#experience" },
  { label: "Projects", href: "#projects" },
  { label: "Certifications", href: "#certifications" },
];
---

<header
  id="site-header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-stone-50/80 backdrop-blur-xl border-b border-stone-200/60">
  <nav class="max-w-5xl mx-auto px-6 h-[70px] flex items-center justify-between" aria-label="Main navigation">
    <a href="/" class="text-xl font-bold text-stone-800 tracking-tight"> Jabriel Ho </a>

    <ul class="hidden md:flex items-center gap-1">
      {
        navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class="px-3 py-2 text-sm text-stone-500 hover:text-stone-800 transition-colors duration-200 rounded-lg hover:bg-stone-100">
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>

    <button
      id="mobile-menu-btn"
      class="md:hidden flex flex-col gap-1.5 p-2"
      aria-label="Toggle menu"
      aria-expanded="false"
      aria-controls="mobile-menu">
      <span class="block w-5 h-0.5 bg-stone-500 transition-all duration-300" aria-hidden="true"></span>
      <span class="block w-5 h-0.5 bg-stone-500 transition-all duration-300" aria-hidden="true"></span>
      <span class="block w-3.5 h-0.5 bg-stone-500 transition-all duration-300 ml-auto" aria-hidden="true"></span>
    </button>
  </nav>

  <div id="mobile-menu" class="md:hidden hidden bg-stone-50 border-t border-stone-100" role="menu">
    <ul class="px-6 py-4 flex flex-col gap-1">
      {
        navLinks.map((link) => (
          <li role="none">
            <a
              href={link.href}
              role="menuitem"
              class="block px-4 py-3 text-stone-500 hover:text-stone-800 hover:bg-stone-100 rounded-lg transition-all duration-200 mobile-nav-link">
              {link.label}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</header>

<script>
  const btn = document.getElementById("mobile-menu-btn")!;
  const menu = document.getElementById("mobile-menu")!;
  const bars = btn.querySelectorAll("span");

  let open = false;

  function setMenuState(isOpen: boolean) {
    open = isOpen;
    btn.setAttribute("aria-expanded", String(open));
    menu.classList.toggle("hidden", !open);

    if (open) {
      bars[0].style.transform = "rotate(45deg) translate(4px, 4px)";
      bars[1].style.opacity = "0";
      bars[2].style.transform = "rotate(-45deg) translate(2px, -2px)";
      bars[2].style.width = "20px";
    } else {
      bars[0].style.transform = "";
      bars[1].style.opacity = "1";
      bars[2].style.transform = "";
      bars[2].style.width = "14px";
    }
  }

  btn.addEventListener("click", () => setMenuState(!open));

  document.querySelectorAll(".mobile-nav-link").forEach((link) => {
    link.addEventListener("click", () => setMenuState(false));
  });
</script>
